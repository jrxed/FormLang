### ФИО

Кормин Павел Дмитриевич

### Группа

Б05-325

### Подготовка

Если в системе не установлен Python версии 3 и выше, устанавливаем его
(это можно сделать здесь: https://www.python.org/downloads/).
Для запуска тестов потребуется установить пару модулей
(об этом подробнее в соответствующем разделе), так что при установке Python
надо будет согласиться на установку pip.

### Описание запуска

Запускаем файл **main.py**:

```python3 main.py```

#### Форматы ввода:

- С помощью регулярного выражения: тогда на вход программе подаем 0, затем 0, если хотим
получить автомат, соответствующий языку, задаваемому регулярным выражением, или 1, если хотим
получить автомат для дополнения этого языка. После этого на вход подаем строку, содержащую все
символы алфавита (алфавит не должен содержать служебных символов, о которых ниже),
для которого хотим получить автомат, а после этого наконец вводим
регулярное выражение (формат описан ниже).

- Можно подать конфигурацию автомата, описанную ниже, для этого нужно ее поместить в файл
**input.json** (пример уже находится в файле **input.json**), а на входе первым вводом подать 1, затем
аналогично предыдущему случаю необходимо выбрать автомат или его дополнение.

Замечание: то, выбрано построение автомата для языка или для его дополнения, влияет на
конечный результат только для ПДКА и МПДКА.

#### Формат регулярного выражения:

Регулярное выражение может содержать символы из алфавита, а также служебные символы:
`(`,  `)`, `|`, `*`, `+` и `1` или `ε` в качестве пустого слова (можно использовать одновременно).

**Конкатенацию указывать не нужно.**

#### Формат вывода
На выходе получим файл **output.json**, в котором хранятся конфигурации автоматов:

- epsilon-НКА (enfa)
- НКА (nfa)
- ДКА (dfa)
- ПДКА (cdfa)
- МПДКА (mcdfa)

Для каждого автомата указано:
- sigma - алфавит
- start - начальное состояние
- states - множество всех состояний
- final - множество завершающих состояний
- delta - множество переходов:
- - from - состояние, из которого делается переход
- - to - состояние, в которое делается переход
- - sym - строка, по которой делается переход
(в epsilon-НКА может быть пустой, в остальных случаях ее длина равна 1)

### Описание репозитория

В корневой директории находятся исполняемый файл **main.py**, в папке **src** расположены
файлы с классами _RegExp_, _AST_, _ENFA_, _NFA_, _DFA_, _CDFA_, _MCDFA_, а также файл **details.py**, 
в котором реализованы функции, упрощающие удаление ε-переходов (используется в **nfa.py**).

В папке **tests** расположен файл **test_mcdfa.py**, в котором написаны тесты для построения
МПДКА из регулярного выражения.

### Что реализовано

- reg -> ast
- ast -> ε-nfa
- ε-nfa -> nfa
- nfa -> dfa
- dfa -> cdfa
- cdfa -> min-cdfa
- cdfa -> co-cdfa
- min-cdfa -> co-min-cdfa

### Тесты

Перед запуском тестов нужно установить зависимости: **pytest**, **pytest-cov**, **coverage**:

```pip install -r requirements.txt```

Чтобы выполнить запуск тестов, необходимо выполнить команду:

```PYTHONPATH=src python3 -m pytest --cov -vv src tests```

### Примечание (особенности тестов)

В построении МПДКА поддерживается следующий инвариант:

- **sigma** - tuple, лексикографически отсортированный
- **start** = 0
- **states** = [0, 1, ..., n - 1, n]
- **final** - set
- **delta** отсортировано сначала по from, затем по sym

Поэтому достаточно сравнить получившуюся конфигурацию с написанной
по данным правилам вручную.
